{"version":3,"sources":["components/LoginPage/video-logo.png","components/VideoProvider/useSelectedParticipant/useSelectedParticipant.tsx","components/VideoProvider/useLocalTracks/useLocalTracks.ts","components/VideoProvider/index.tsx","components/VideoProvider/useRoom/useRoom.tsx","components/VideoProvider/useHandleRoomDisconnectionErrors/useHandleRoomDisconnectionErrors.ts","components/VideoProvider/useHandleTrackPublicationFailed/useHandleTrackPublicationFailed.ts","components/VideoProvider/useHandleOnDisconnect/useHandleOnDisconnect.ts","hooks/useVideoContext/useVideoContext.ts","components/Controls/EndCallButton/EndCallButton.tsx","hooks/useLocalAudioToggle/useLocalAudioToggle.tsx","hooks/useIsTrackEnabled/useIsTrackEnabled.tsx","components/Controls/ToggleAudioButton/ToggleAudioButton.tsx","components/Controls/ToggleVideoButton/ToggleVideoButton.tsx","hooks/useLocalVideoToggle/useLocalVideoToggle.tsx","hooks/useScreenShareParticipant/useScreenShareParticipant.tsx","components/Controls/ToogleScreenShareButton/ToggleScreenShareButton.tsx","hooks/useScreenShareToggle/useScreenShareToggle.tsx","hooks/useRoomState/useRoomState.tsx","components/Controls/Controls.tsx","components/Controls/useIsUserActive/useIsUserActive.ts","components/VideoTrack/VideoTrack.tsx","components/LocalVideoPreview/LocalVideoPreview.tsx","components/ToggleFullScreenButton/ToggleFullScreenButton.tsx","hooks/useFullScreenToggle/useFullScreenToggle.tsx","components/MenuBar/AboutDialog/AboutDialog.tsx","components/MenuBar/UserAvatar/UserAvatar.tsx","state/useFirebaseAuth/useFirebaseAuth.ts","state/usePasscodeAuth/usePasscodeAuth.ts","state/index.tsx","components/MenuBar/Menu/Menu.tsx","components/MenuBar/MenuBar.tsx","components/ReconnectingNotification/ReconnectingNotification.tsx","components/BandwidthWarning/BandwidthWarning.tsx","components/NewtorkQualityLevel/NetworkQualityLevel.tsx","components/ParticipantInfo/ParticipantConnectionIndicator/ParticipantConnectionIndicator.tsx","hooks/useParticipantIsReconnecting/useParticipantIsReconnecting.ts","components/ParticipantInfo/PinIcon/PinIcon.tsx","hooks/usePublications/usePublications.tsx","hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff.tsx","hooks/useTrack/useTrack.tsx","components/ParticipantInfo/ParticipantInfo.tsx","hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel.tsx","hooks/usePublicationIsTrackEnabled/usePublicationIsTrackEnabled.tsx","components/AudioTrack/AudioTrack.tsx","components/Publication/Publication.tsx","components/ParticipantTracks/ParticipantTracks.tsx","components/Participant/Participant.tsx","hooks/useDominantSpeaker/useDominantSpeaker.tsx","hooks/useParticipants/useParticipants.tsx","components/ParticipantStrip/ParticipantStrip.tsx","components/MainParticipantInfo/MainParticipantInfo.tsx","components/MainParticipant/MainParticipant.tsx","hooks/useMainSpeaker/useMainSpeaker.tsx","components/Room/Room.tsx","App.tsx","components/ErrorDialog/ErrorDialog.tsx","components/ErrorDialog/enhanceMessage.ts","components/LoginPage/google-logo.svg","components/LoginPage/twilio-logo.svg","components/LoginPage/LoginPage.tsx","components/PrivateRoute/PrivateRoute.tsx","theme.ts","index.tsx"],"names":["module","exports","selectedParticipantContext","createContext","useSelectedParticipant","useContext","SelectedParticipantProvider","room","children","useState","selectedParticipant","_setSelectedParticipant","useEffect","onDisconnect","on","off","Provider","value","participant","prevParticipant","useLocalTracks","audioTrack","track","setTrack","Video","createLocalAudioTrack","then","newTrack","handleStopped","undefined","useLocalAudioTrack","getLocalVideoTrack","useCallback","createLocalVideoTrack","frameRate","height","width","name","useLocalVideoTrack","videoTrack","localTracks","filter","VideoContext","VideoProvider","options","onError","onErrorCallback","error","console","log","message","EventEmitter","setRoom","isConnecting","setIsConnecting","disconnectHandlerRef","useRef","localTracksRef","current","connect","token","tracks","newRoom","once","setTimeout","window","removeEventListener","twilioRoom","forEach","localParticipant","publishTrack","priority","kind","disconnect","addEventListener","useRoom","onDisconnected","useHandleRoomDisconnectionErrors","useHandleTrackPublicationFailed","useHandleOnDisconnect","useVideoContext","context","Error","useStyles","makeStyles","theme","createStyles","fab","margin","spacing","EndCallButton","classes","Tooltip","title","onClick","placement","PopperProps","disablePortal","Fab","className","color","useLocalAudioToggle","find","isEnabled","setIsEnabled","setEnabled","setDisabled","useIsTrackEnabled","disable","enable","ToggleAudioButton","props","isAudioEnabled","toggleAudioEnabled","disabled","data-cy-audio-toggle","ToggleVideoButton","toggleVideoEnabled","localTrackPublication","unpublishTrack","emit","stop","useLocalVideoToggle","isVideoEnabled","useScreenShareParticipant","screenShareParticipant","setScreenShareParticipant","state","updateScreenShareParticipant","Array","from","participants","values","concat","trackName","backgroundColor","ToggleScreenShareButton","isSharing","setIsSharing","stopScreenShareRef","shareScreen","navigator","mediaDevices","getDisplayMedia","audio","video","stream","getTracks","trackPublication","onended","catch","toggleScreenShare","useScreenShareToggle","isScreenShared","disableScreenShareButton","isScreenShareSupported","isDisabled","tooltipMessage","style","cursor","useRoomState","setState","setRoomState","container","display","position","right","transform","bottom","zIndex","transition","opacity","visibility","Controls","roomState","isReconnecting","showControls","isUserActive","setIsUserActive","timeoutIDRef","handleUserActivity","throttle","clearTimeout","timeoutID","useIsUserActive","clsx","styled","maxHeight","objectFit","VideoTrack","isLocal","ref","el","muted","setPriority","attach","detach","LocalVideoPreview","FullscreenButton","IconButton","marginLeft","ToggleFullscreenButton","fscreen","fullscreenElement","isFullScreen","setIsFullScreen","onFullScreenChange","toggleFullScreen","exitFullscreen","requestFullscreen","document","documentElement","useFullScreenToggle","aria-label","AboutDialog","open","onClose","Dialog","fullWidth","maxWidth","DialogTitle","DialogContent","DialogContentText","String","isSupported","version","appVersion","process","REACT_APP_GIT_TAG","REACT_APP_GIT_COMMIT","DialogActions","Button","autoFocus","red","UserAvatar","user","displayName","photoURL","Avatar","src","split","map","text","join","toUpperCase","REACT_APP_FIREBASE_API_KEY","REACT_APP_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_DATABASE_URL","REACT_APP_FIREBASE_STORAGE_BUCKET","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","fetchToken","passcode","fetch","method","headers","body","JSON","stringify","user_identity","room_name","verifyPasscode","res","a","json","jsonResponse","status","isValid","ok","usePasscodeAuth","history","useHistory","setUser","isAuthReady","setIsAuthReady","getToken","match","location","search","sessionStorage","getItem","getPasscode","verification","setItem","replace","pathname","signIn","getErrorMessage","signOut","removeItem","Promise","resolve","StateContext","useAppState","Menu","aboutOpen","setAboutOpen","menuOpen","setMenuOpen","anchorRef","handleSignOut","anchorEl","MenuItem","palette","background","default","form","alignItems","textField","marginRight","loadingSpinner","minWidth","fontWeight","MenuBar","URLRoomName","useParams","isFetching","setName","roomName","setRoomName","AppBar","Toolbar","onSubmit","event","preventDefault","origin","includes","replaceState","encodeURI","Typography","variant","TextField","id","label","onChange","target","type","CircularProgress","snackbar","icon","ReconnectingNotification","Snackbar","anchorOrigin","vertical","horizontal","SnackbarContent","BandwidthWarningContainer","flexDirection","justifyContent","Warning","textAlign","BandwidthWarning","fontSize","Container","border","boxSizing","borderRight","NetworkQualityLevel","qualityLevel","level","key","indicator","borderRadius","ParticipantConnectionIndicator","setIsReconnecting","handleReconnecting","handleReconnected","useParticipantIsReconnecting","PinIcon","SvgIcon","float","usePublications","publications","setPublications","publicationAdded","publication","prevPublications","publicationRemoved","p","useIsTrackSwitchedOff","isSwitchedOff","setIsSwitchedOff","handleSwitchedOff","handleSwitchedOn","useTrack","removeTrack","sidebarWidth","overflow","stroke","strokeWidth","isVideoSwitchedOff","infoContainer","padding","hideVideo","identity","infoRow","ParticipantInfo","isSelected","audioPublication","videoPublication","networkQualityLevel","setNetworkQualityLevel","handleNewtorkQualityLevelChange","newNetworkQualityLevel","useParticipantNetworkQualityLevel","isTrackEnabled","usePublicationIsTrackEnabled","Boolean","isScreenShareEnabled","data-cy-participant","data-cy-audio-mute-icon","AudioTrack","Publication","disableAudio","videoPriority","ParticipantTracks","filteredPublications","enableScreenShare","some","Participant","useDominantSpeaker","dominantSpeaker","setDominantSpeaker","handleDominantSpeakerChanged","newDominantSpeaker","handleParticipantDisconnected","prevDominantSpeaker","useParticipants","setParticipants","prevParticipants","participantConnected","participantDisconnected","top","left","overflowY","ParticipantStrip","setSelectedParticipant","sid","MainParticipantInfo","screenSharePublication","data-cy-main-participant","MainParticipant","mainParticipant","useMainSpeaker","MainParticipantContainer","Room","Main","App","ErrorDialog","dismissError","code","enhancedMessage","enhanceMessage","_extends","Object","assign","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref3","_ref4","x","y","filterUnits","dx","dy","in","result","stdDeviation","rx","_ref5","fill","fillRule","d","_ref","svgRef","viewBox","forwardRef","twilioLogo","videoLogo","paper","marginTop","button","textTransform","errorMessage","createMuiTheme","PrivateRoute","rest","renderChildren","render","to","primary","main","connectionOptions","bandwidthProfile","mode","renderDimensions","high","standard","low","maxAudioBitrate","networkQuality","local","remote","preferredVideoCodecs","codec","simulcast","VideoApp","setError","ReactDOM","CssBaseline","setIsFetching","contextValue","err","reject","exact","path","useLocation","setPasscode","authError","setAuthError","isAuthEnabled","ThemeProvider","Grid","justify","Paper","elevation","alt","e","direction","getElementById"],"mappings":"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","file":"static/js/main.f677347b.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZIAAAEyCAYAAADQnlYUAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFdElEQVR42u3dwW3DUAxEQSnI2a2oCxXtLtyKGlB68BrZMH+mAoGH/8CLuF/HeW8AC3u8nrspvO/LCAAQEgAqruO8hQSAtyNiIwEgioiQABBFREgAiCIiJABEERESAKKICAkAUUSEBIAoIkICQBQRIQEgioiQABBFREgAiCIiJABEERESAKKICAkAW3rg8PuTH+PKGDDl8eNzc7SRAIiIkADQ2+iEBEBEhASATkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASA7t+QhQRARIQEQESEBICBERESABEREgARERIAhkZESABEREgARERIABgaESEBEBEhARARIQFgaESEBEBEhARARIQEgKERERKARSPyeD13IQEQkXpEhARARIQEQER6ERESABEREgAR6UVESABEREgARKQXESEBEBEhARCRXkSEBEBEhARARHoRERIAERESABHpRURIAERESABEREgARGRoRIQEQESEBEBEhARARIZGREgARERIAERESABEZGhEhARARIQEQESEBEBEhkZESABEREgARERIAERkaESEBEBEhARARIQEQESEBEBEVoyIkACIiJAATPLfIiIkACIiJAAiIiQAIiIkAKwYESEBEBEhARARIQEQESEBYMWICAmAiAgJgIgICYCICAmAiAgJACIiJAAiIiQAIiIkACIiJACIiJAAiIiQAIiIkACIiJAAiAhCAiAiQgIgIkICICJCAiAiCAmAiAgJgIgICYCICAmAiAgJgIggJAAiIiQAIiIkACIiJAAigpAAiIiQAIiIkACIiJAAiAhCAogIQgIgIkICICJCAiAiCAkgIggJgIj8Fd9GAAgINhIAhAQAIQFASABASAAQEgCEBAAhAQAhAUBIABASAIQEAIQEACEBQEgAEBIAEBIAhAQAIQFASAAQEgAQEgCEBAAhAUBIAEBIABASAIQEACEBACEBQEgAEBIAhAQAhAQAIQFASAAQEgCEBACEBAAhAUBIABASABASAIQEACEBQEgAQEgAEBIAhAQAIQEAIQFASAAQEoDQdZz3dZy3SQgJQBwUUxASADEREgAxERIAMUFIADEREyEBEBMhARATIQEQE4QEQEyEBEBMhARATIQEQEwQEgAxERIAMRESADEREgAxQUgAxERIAMRESADEREgAxERIABATIQEQEyEBEBMhARATIQFATIQEQEyEBEBMhARATIQEADEREgAxERIAMRESADEREgDEREgAxERIAMRESADEREgAWDsmQgIgJkICICZCAiAmQgLAijEREgAxERIAMRESADEREgBWjImQAGzb9ng9dzEREgAxERIAMRESADFZKiZCAiAmQgIgJkICICZDYyIkAGIiJABiIiQAYjI0JkICICZCAiAmQgIgJkNjIiQAYiIkAGIiJABiMjQmQgIgJkICICZCAiAmQ2MiJABiIiQAYtKLiZAAiImQAIhJLyZCAiAmQgIgJr2YCAmAmAgJgJj0YiIkAGIiJABi0ouJkACIiZAAiEkvJkICICZCAiAmvZgICcCiMRESADEREgDmx0RIAMRESADEREgAGBoTIQEQEyEBEBMhAWBoTIQEQEyEBEBMhASAoTEREgAxERIAMRESAIbGREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFZL+O8zZOwKP6926h/5a0AzYSABGNIiokAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACIYiIkAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACI/ACDMI238rqCJQAAAABJRU5ErkJggg==\"","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { Participant, Room } from 'twilio-video';\n\ntype selectedParticipantContextType = [Participant | null, (participant: Participant) => void];\n\nexport const selectedParticipantContext = createContext<selectedParticipantContextType>(null!);\n\nexport default function useSelectedParticipant() {\n  const [selectedParticipant, setSelectedParticipant] = useContext(selectedParticipantContext);\n  return [selectedParticipant, setSelectedParticipant] as const;\n}\n\ntype SelectedParticipantProviderProps = {\n  room: Room;\n  children: React.ReactNode;\n};\n\nexport function SelectedParticipantProvider({ room, children }: SelectedParticipantProviderProps) {\n  const [selectedParticipant, _setSelectedParticipant] = useState<Participant | null>(null);\n  const setSelectedParticipant = (participant: Participant) =>\n    _setSelectedParticipant(prevParticipant => (prevParticipant === participant ? null : participant));\n\n  useEffect(() => {\n    const onDisconnect = () => _setSelectedParticipant(null);\n    room.on('disconnected', onDisconnect);\n    return () => {\n      room.off('disconnected', onDisconnect);\n    };\n  }, [room]);\n\n  return (\n    <selectedParticipantContext.Provider value={[selectedParticipant, setSelectedParticipant]}>\n      {children}\n    </selectedParticipantContext.Provider>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport Video, { LocalVideoTrack, LocalAudioTrack } from 'twilio-video';\n\nexport function useLocalAudioTrack() {\n  const [track, setTrack] = useState<LocalAudioTrack>();\n\n  useEffect(() => {\n    Video.createLocalAudioTrack().then(newTrack => {\n      setTrack(newTrack);\n    });\n  }, []);\n\n  useEffect(() => {\n    const handleStopped = () => setTrack(undefined);\n    if (track) {\n      track.on('stopped', handleStopped);\n      return () => {\n        track.off('stopped', handleStopped);\n      };\n    }\n  }, [track]);\n\n  return track;\n}\n\nexport function useLocalVideoTrack() {\n  const [track, setTrack] = useState<LocalVideoTrack>();\n\n  const getLocalVideoTrack = useCallback(\n    () =>\n      Video.createLocalVideoTrack({\n        frameRate: 24,\n        height: 720,\n        width: 1280,\n        name: 'camera',\n      }).then(newTrack => {\n        setTrack(newTrack);\n        return newTrack;\n      }),\n    []\n  );\n\n  useEffect(() => {\n    // We get a new local video track when the app loads.\n    getLocalVideoTrack();\n  }, [getLocalVideoTrack]);\n\n  useEffect(() => {\n    const handleStopped = () => setTrack(undefined);\n    if (track) {\n      track.on('stopped', handleStopped);\n      return () => {\n        track.off('stopped', handleStopped);\n      };\n    }\n  }, [track]);\n\n  return [track, getLocalVideoTrack] as const;\n}\n\nexport default function useLocalTracks() {\n  const audioTrack = useLocalAudioTrack();\n  const [videoTrack, getLocalVideoTrack] = useLocalVideoTrack();\n\n  const localTracks = [audioTrack, videoTrack].filter(track => track !== undefined) as (\n    | LocalAudioTrack\n    | LocalVideoTrack\n  )[];\n\n  return { localTracks, getLocalVideoTrack };\n}\n","import React, { createContext, ReactNode } from 'react';\nimport { ConnectOptions, Room, TwilioError, LocalAudioTrack, LocalVideoTrack } from 'twilio-video';\nimport { Callback, ErrorCallback } from '../../types';\nimport { SelectedParticipantProvider } from './useSelectedParticipant/useSelectedParticipant';\n\nimport useHandleRoomDisconnectionErrors from './useHandleRoomDisconnectionErrors/useHandleRoomDisconnectionErrors';\nimport useHandleOnDisconnect from './useHandleOnDisconnect/useHandleOnDisconnect';\nimport useHandleTrackPublicationFailed from './useHandleTrackPublicationFailed/useHandleTrackPublicationFailed';\nimport useLocalTracks from './useLocalTracks/useLocalTracks';\nimport useRoom from './useRoom/useRoom';\n\n/*\n *  The hooks used by the VideoProvider component are different than the hooks found in the 'hooks/' directory. The hooks\n *  in the 'hooks/' directory can be used anywhere in a video application, and they can be used any number of times.\n *  the hooks in the 'VideoProvider/' directory are intended to be used by the VideoProvider component only. Using these hooks\n *  elsewhere in the application may cause problems as these hooks should not be used more than once in an application.\n */\n\nexport interface IVideoContext {\n  room: Room;\n  localTracks: (LocalAudioTrack | LocalVideoTrack)[];\n  isConnecting: boolean;\n  connect: (token: string) => Promise<void>;\n  onError: ErrorCallback;\n  onDisconnect: Callback;\n  getLocalVideoTrack: () => Promise<LocalVideoTrack>;\n}\n\nexport const VideoContext = createContext<IVideoContext>(null!);\n\ninterface VideoProviderProps {\n  options?: ConnectOptions;\n  onError: ErrorCallback;\n  onDisconnect?: Callback;\n  children: ReactNode;\n}\n\nexport function VideoProvider({ options, children, onError = () => {}, onDisconnect = () => {} }: VideoProviderProps) {\n  const onErrorCallback = (error: TwilioError) => {\n    console.log(`ERROR: ${error.message}`, error);\n    onError(error);\n  };\n\n  const { localTracks, getLocalVideoTrack } = useLocalTracks();\n  const { room, isConnecting, connect } = useRoom(localTracks, onErrorCallback, options);\n\n  // Register onError and onDisconnect callback functions.\n  useHandleRoomDisconnectionErrors(room, onError);\n  useHandleTrackPublicationFailed(room, onError);\n  useHandleOnDisconnect(room, onDisconnect);\n\n  return (\n    <VideoContext.Provider\n      value={{\n        room,\n        localTracks,\n        isConnecting,\n        onError: onErrorCallback,\n        onDisconnect,\n        getLocalVideoTrack,\n        connect,\n      }}\n    >\n      <SelectedParticipantProvider room={room}>{children}</SelectedParticipantProvider>\n    </VideoContext.Provider>\n  );\n}\n","import EventEmitter from 'events';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport Video, { ConnectOptions, LocalTrack, Room } from 'twilio-video';\nimport { Callback } from '../../../types';\n\nexport default function useRoom(localTracks: LocalTrack[], onError: Callback, options?: ConnectOptions) {\n  const [room, setRoom] = useState<Room>(new EventEmitter() as Room);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const disconnectHandlerRef = useRef<() => void>(() => {});\n  const localTracksRef = useRef<LocalTrack[]>([]);\n\n  useEffect(() => {\n    // It can take a moment for Video.connect to connect to a room. During this time, the user may have enabled or disabled their\n    // local audio or video tracks. If this happens, we store the localTracks in this ref, so that they are correctly published\n    // once the user is connected to the room.\n    localTracksRef.current = localTracks;\n  }, [localTracks]);\n\n  const connect = useCallback(\n    token => {\n      setIsConnecting(true);\n      return Video.connect(token, { ...options, tracks: [] }).then(\n        newRoom => {\n          setRoom(newRoom);\n\n          newRoom.once('disconnected', () => {\n            // Reset the room only after all other `disconnected` listeners have been called.\n            setTimeout(() => setRoom(new EventEmitter() as Room));\n            window.removeEventListener('beforeunload', disconnectHandlerRef.current);\n          });\n\n          // @ts-ignore\n          window.twilioRoom = newRoom;\n\n          localTracksRef.current.forEach(track =>\n            // Tracks can be supplied as arguments to the Video.connect() function and they will automatically be published.\n            // However, tracks must be published manually in order to set the priority on them.\n            // All video tracks are published with 'low' priority. This works because the video\n            // track that is displayed in the 'MainParticipant' component will have it's priority\n            // set to 'high' via track.setPriority()\n            newRoom.localParticipant.publishTrack(track, { priority: track.kind === 'video' ? 'low' : 'standard' })\n          );\n\n          disconnectHandlerRef.current = () => newRoom.disconnect();\n          setIsConnecting(false);\n\n          // Add a listener to disconnect from the room when a user closes their browser\n          window.addEventListener('beforeunload', disconnectHandlerRef.current);\n        },\n        error => {\n          onError(error);\n          setIsConnecting(false);\n        }\n      );\n    },\n    [options, onError]\n  );\n\n  return { room, isConnecting, connect };\n}\n","import { Room, TwilioError } from 'twilio-video';\nimport { useEffect } from 'react';\n\nimport { Callback } from '../../../types';\n\nexport default function useHandleRoomDisconnectionErrors(room: Room, onError: Callback) {\n  useEffect(() => {\n    const onDisconnected = (room: Room, error: TwilioError) => {\n      if (error) {\n        onError(error);\n      }\n    };\n\n    room.on('disconnected', onDisconnected);\n    return () => {\n      room.off('disconnected', onDisconnected);\n    };\n  }, [room, onError]);\n}\n","import { Room } from 'twilio-video';\nimport { useEffect } from 'react';\n\nimport { Callback } from '../../../types';\n\nexport default function useHandleTrackPublicationFailed(room: Room, onError: Callback) {\n  const { localParticipant } = room;\n  useEffect(() => {\n    if (localParticipant) {\n      localParticipant.on('trackPublicationFailed', onError);\n      return () => {\n        localParticipant.off('trackPublicationFailed', onError);\n      };\n    }\n  }, [localParticipant, onError]);\n}\n","import { useEffect } from 'react';\nimport { Room } from 'twilio-video';\nimport { Callback } from '../../../types';\n\nexport default function useHandleOnDisconnect(room: Room, onDisconnect: Callback) {\n  useEffect(() => {\n    room.on('disconnected', onDisconnect);\n    return () => {\n      room.off('disconnected', onDisconnect);\n    };\n  }, [room, onDisconnect]);\n}\n","import { useContext } from 'react';\nimport { VideoContext } from '../../components/VideoProvider';\n\nexport default function useVideoContext() {\n  const context = useContext(VideoContext);\n  if (!context) {\n    throw new Error('useVideoContext must be used within a VideoProvider');\n  }\n  return context;\n}\n","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport CallEnd from '@material-ui/icons/CallEnd';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fab: {\n      margin: theme.spacing(1),\n    },\n  })\n);\n\nexport default function EndCallButton() {\n  const classes = useStyles();\n  const { room } = useVideoContext();\n\n  return (\n    <Tooltip title={'End Call'} onClick={() => room.disconnect()} placement=\"top\" PopperProps={{ disablePortal: true }}>\n      <Fab className={classes.fab} color=\"primary\">\n        <CallEnd />\n      </Fab>\n    </Tooltip>\n  );\n}\n","import { LocalAudioTrack } from 'twilio-video';\nimport { useCallback } from 'react';\nimport useIsTrackEnabled from '../useIsTrackEnabled/useIsTrackEnabled';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useLocalAudioToggle() {\n  const { localTracks } = useVideoContext();\n  const audioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\n  const isEnabled = useIsTrackEnabled(audioTrack);\n\n  const toggleAudioEnabled = useCallback(() => {\n    if (audioTrack) {\n      audioTrack.isEnabled ? audioTrack.disable() : audioTrack.enable();\n    }\n  }, [audioTrack]);\n\n  return [isEnabled, toggleAudioEnabled] as const;\n}\n","import { useState, useEffect } from 'react';\nimport { LocalAudioTrack, LocalVideoTrack, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\n\ntype TrackType = LocalAudioTrack | LocalVideoTrack | RemoteAudioTrack | RemoteVideoTrack | undefined;\n\nexport default function useIsTrackEnabled(track: TrackType) {\n  const [isEnabled, setIsEnabled] = useState(track ? track.isEnabled : true);\n\n  useEffect(() => {\n    setIsEnabled(track ? track.isEnabled : true);\n\n    if (track) {\n      const setEnabled = () => setIsEnabled(true);\n      const setDisabled = () => setIsEnabled(false);\n      track.on('enabled', setEnabled);\n      track.on('disabled', setDisabled);\n      return () => {\n        track.off('enabled', setEnabled);\n        track.off('disabled', setDisabled);\n      };\n    }\n  }, [track]);\n\n  return isEnabled;\n}\n","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport Fab from '@material-ui/core/Fab';\nimport Mic from '@material-ui/icons/Mic';\nimport MicOff from '@material-ui/icons/MicOff';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport useLocalAudioToggle from '../../../hooks/useLocalAudioToggle/useLocalAudioToggle';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fab: {\n      margin: theme.spacing(1),\n    },\n  })\n);\n\nexport default function ToggleAudioButton(props: { disabled?: boolean }) {\n  const classes = useStyles();\n  const [isAudioEnabled, toggleAudioEnabled] = useLocalAudioToggle();\n\n  return (\n    <Tooltip\n      title={isAudioEnabled ? 'Mute Audio' : 'Unmute Audio'}\n      placement=\"top\"\n      PopperProps={{ disablePortal: true }}\n    >\n      <Fab className={classes.fab} onClick={toggleAudioEnabled} disabled={props.disabled} data-cy-audio-toggle>\n        {isAudioEnabled ? <Mic /> : <MicOff />}\n      </Fab>\n    </Tooltip>\n  );\n}\n","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Videocam from '@material-ui/icons/Videocam';\nimport VideocamOff from '@material-ui/icons/VideocamOff';\n\nimport useLocalVideoToggle from '../../../hooks/useLocalVideoToggle/useLocalVideoToggle';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fab: {\n      margin: theme.spacing(1),\n    },\n  })\n);\n\nexport default function ToggleVideoButton(props: { disabled?: boolean }) {\n  const classes = useStyles();\n  const [isVideoEnabled, toggleVideoEnabled] = useLocalVideoToggle();\n\n  return (\n    <Tooltip\n      title={isVideoEnabled ? 'Mute Video' : 'Unmute Video'}\n      placement=\"top\"\n      PopperProps={{ disablePortal: true }}\n    >\n      <Fab className={classes.fab} onClick={toggleVideoEnabled} disabled={props.disabled}>\n        {isVideoEnabled ? <Videocam /> : <VideocamOff />}\n      </Fab>\n    </Tooltip>\n  );\n}\n","import { LocalVideoTrack } from 'twilio-video';\nimport { useCallback } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useLocalVideoToggle() {\n  const {\n    room: { localParticipant },\n    localTracks,\n    getLocalVideoTrack,\n  } = useVideoContext();\n  const videoTrack = localTracks.find(track => track.name === 'camera') as LocalVideoTrack;\n\n  const toggleVideoEnabled = useCallback(() => {\n    if (videoTrack) {\n      if (localParticipant) {\n        const localTrackPublication = localParticipant.unpublishTrack(videoTrack);\n        // TODO: remove when SDK implements this event. See: https://issues.corp.twilio.com/browse/JSDK-2592\n        localParticipant.emit('trackUnpublished', localTrackPublication);\n      }\n      videoTrack.stop();\n    } else {\n      getLocalVideoTrack().then((track: LocalVideoTrack) => {\n        if (localParticipant) {\n          localParticipant.publishTrack(track);\n        }\n      });\n    }\n  }, [videoTrack, localParticipant, getLocalVideoTrack]);\n\n  return [!!videoTrack, toggleVideoEnabled] as const;\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nimport { Participant, TrackPublication } from 'twilio-video';\n\n/*\n  Returns the participant that is sharing their screen (if any). This hook assumes that only one participant\n  can share their screen at a time.\n*/\nexport default function useScreenShareParticipant() {\n  const { room } = useVideoContext();\n  const [screenShareParticipant, setScreenShareParticipant] = useState();\n\n  useEffect(() => {\n    if (room.state === 'connected') {\n      const updateScreenShareParticipant = () => {\n        setScreenShareParticipant(\n          Array.from<Participant>(room.participants.values())\n            // the screenshare participant could be the localParticipant\n            .concat(room.localParticipant)\n            .find((participant: Participant) =>\n              Array.from<TrackPublication>(participant.tracks.values()).find(track => track.trackName === 'screen')\n            )\n        );\n      };\n      updateScreenShareParticipant();\n\n      room.on('trackPublished', updateScreenShareParticipant);\n      room.on('trackUnpublished', updateScreenShareParticipant);\n      room.on('participantDisconnected', updateScreenShareParticipant);\n\n      // the room object does not emit 'trackPublished' events for the localParticipant,\n      // so we need to listen for them here.\n      room.localParticipant.on('trackPublished', updateScreenShareParticipant);\n      room.localParticipant.on('trackUnpublished', updateScreenShareParticipant);\n      return () => {\n        room.off('trackPublished', updateScreenShareParticipant);\n        room.off('trackUnpublished', updateScreenShareParticipant);\n        room.off('participantDisconnected', updateScreenShareParticipant);\n\n        room.localParticipant.off('trackPublished', updateScreenShareParticipant);\n        room.localParticipant.off('trackUnpublished', updateScreenShareParticipant);\n      };\n    }\n  }, [room]);\n\n  return screenShareParticipant;\n}\n","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport Fab from '@material-ui/core/Fab';\nimport ScreenShare from '@material-ui/icons/ScreenShare';\nimport StopScreenShare from '@material-ui/icons/StopScreenShare';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport useScreenShareToggle from '../../../hooks/useScreenShareToggle/useScreenShareToggle';\nimport useScreenShareParticipant from '../../../hooks/useScreenShareParticipant/useScreenShareParticipant';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nexport const SCREEN_SHARE_TEXT = 'Share Screen';\nexport const STOP_SCREEN_SHARE_TEXT = 'Stop Sharing Screen';\nexport const SHARE_IN_PROGRESS_TEXT = 'Cannot share screen when another user is sharing';\nexport const SHARE_NOT_SUPPORTED_TEXT = 'Screen sharing is not supported with this browser';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fab: {\n      margin: theme.spacing(1),\n      '&[disabled]': {\n        color: 'rgba(225, 225, 225, 0.8)',\n        backgroundColor: 'rgba(175, 175, 175, 0.6);',\n      },\n    },\n  })\n);\n\nexport default function ToggleScreenShareButton(props: { disabled?: boolean }) {\n  const classes = useStyles();\n  const [isScreenShared, toggleScreenShare] = useScreenShareToggle();\n  const screenShareParticipant = useScreenShareParticipant();\n  const { room } = useVideoContext();\n  const disableScreenShareButton = screenShareParticipant && screenShareParticipant !== room.localParticipant;\n  const isScreenShareSupported = navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia;\n  const isDisabled = props.disabled || disableScreenShareButton || !isScreenShareSupported;\n\n  let tooltipMessage = SCREEN_SHARE_TEXT;\n\n  if (isScreenShared) {\n    tooltipMessage = STOP_SCREEN_SHARE_TEXT;\n  }\n\n  if (disableScreenShareButton) {\n    tooltipMessage = SHARE_IN_PROGRESS_TEXT;\n  }\n\n  if (!isScreenShareSupported) {\n    tooltipMessage = SHARE_NOT_SUPPORTED_TEXT;\n  }\n\n  return (\n    <Tooltip\n      title={tooltipMessage}\n      placement=\"top\"\n      PopperProps={{ disablePortal: true }}\n      style={{ cursor: isDisabled ? 'not-allowed' : 'pointer' }}\n    >\n      <div>\n        {/* The div element is needed because a disabled button will not emit hover events and we want to display\n          a tooltip when screen sharing is disabled */}\n        <Fab className={classes.fab} onClick={toggleScreenShare} disabled={isDisabled}>\n          {isScreenShared ? <StopScreenShare /> : <ScreenShare />}\n        </Fab>\n      </div>\n    </Tooltip>\n  );\n}\n","import { useState, useCallback, useRef } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\nimport { LogLevels, Track } from 'twilio-video';\n\ninterface MediaStreamTrackPublishOptions {\n  name?: string;\n  priority: Track.Priority;\n  logLevel: LogLevels;\n}\n\nexport default function useScreenShareToggle() {\n  const { room, onError } = useVideoContext();\n  const [isSharing, setIsSharing] = useState(false);\n  const stopScreenShareRef = useRef<() => void>(null!);\n\n  const shareScreen = useCallback(() => {\n    navigator.mediaDevices\n      .getDisplayMedia({\n        audio: false,\n        video: {\n          frameRate: 10,\n          height: 1080,\n          width: 1920,\n        },\n      })\n      .then(stream => {\n        const track = stream.getTracks()[0];\n\n        // All video tracks are published with 'low' priority. This works because the video\n        // track that is displayed in the 'MainParticipant' component will have it's priority\n        // set to 'high' via track.setPriority()\n        room.localParticipant\n          .publishTrack(track, {\n            name: 'screen', // Tracks can be named to easily find them later\n            priority: 'high',\n          } as MediaStreamTrackPublishOptions)\n          .then(trackPublication => {\n            stopScreenShareRef.current = () => {\n              room.localParticipant.unpublishTrack(track);\n              // TODO: remove this if the SDK is updated to emit this event\n              room.localParticipant.emit('trackUnpublished', trackPublication);\n              track.stop();\n              setIsSharing(false);\n            };\n\n            track.onended = stopScreenShareRef.current;\n            setIsSharing(true);\n          })\n          .catch(onError);\n      })\n      .catch(error => {\n        // Don't display an error if the user closes the screen share dialog\n        if (error.name !== 'AbortError' && error.name !== 'NotAllowedError') {\n          onError(error);\n        }\n      });\n  }, [room, onError]);\n\n  const toggleScreenShare = useCallback(() => {\n    !isSharing ? shareScreen() : stopScreenShareRef.current();\n  }, [isSharing, shareScreen, stopScreenShareRef]);\n\n  return [isSharing, toggleScreenShare] as const;\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\ntype RoomStateType = 'disconnected' | 'connected' | 'reconnecting';\n\nexport default function useRoomState() {\n  const { room } = useVideoContext();\n  const [state, setState] = useState<RoomStateType>('disconnected');\n\n  useEffect(() => {\n    const setRoomState = () => setState((room.state || 'disconnected') as RoomStateType);\n    setRoomState();\n    room\n      .on('disconnected', setRoomState)\n      .on('reconnected', setRoomState)\n      .on('reconnecting', setRoomState);\n    return () => {\n      room\n        .off('disconnected', setRoomState)\n        .off('reconnected', setRoomState)\n        .off('reconnecting', setRoomState);\n    };\n  }, [room]);\n\n  return state;\n}\n","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport EndCallButton from './EndCallButton/EndCallButton';\nimport ToggleAudioButton from './ToggleAudioButton/ToggleAudioButton';\nimport ToggleVideoButton from './ToggleVideoButton/ToggleVideoButton';\nimport ToggleScreenShareButton from './ToogleScreenShareButton/ToggleScreenShareButton';\n\nimport useIsUserActive from './useIsUserActive/useIsUserActive';\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      position: 'absolute',\n      right: '50%',\n      transform: 'translate(50%, 30px)',\n      bottom: '50px',\n      zIndex: 1,\n      transition: 'opacity 1.2s, transform 1.2s, visibility 0s 1.2s',\n      opacity: 0,\n      visibility: 'hidden',\n      '&.showControls, &:hover': {\n        transition: 'opacity 0.6s, transform 0.6s, visibility 0s',\n        opacity: 1,\n        visibility: 'visible',\n        transform: 'translate(50%, 0px)',\n      },\n    },\n  })\n);\n\nexport default function Controls() {\n  const classes = useStyles();\n  const roomState = useRoomState();\n  const isReconnecting = roomState === 'reconnecting';\n  const isUserActive = useIsUserActive();\n  const showControls = isUserActive || roomState === 'disconnected';\n\n  return (\n    <div className={clsx(classes.container, { showControls })}>\n      <ToggleAudioButton disabled={isReconnecting} />\n      <ToggleVideoButton disabled={isReconnecting} />\n      {roomState !== 'disconnected' && (\n        <>\n          <ToggleScreenShareButton disabled={isReconnecting} />\n          <EndCallButton />\n        </>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport throttle from 'lodash.throttle';\n\nexport default function useIsUserActive() {\n  const [isUserActive, setIsUserActive] = useState(true);\n  const timeoutIDRef = useRef(0);\n\n  useEffect(() => {\n    const handleUserActivity = throttle(() => {\n      setIsUserActive(true);\n      clearTimeout(timeoutIDRef.current);\n      const timeoutID = window.setTimeout(() => setIsUserActive(false), 5000);\n      timeoutIDRef.current = timeoutID;\n    }, 500);\n\n    handleUserActivity();\n\n    window.addEventListener('mousemove', handleUserActivity);\n    window.addEventListener('click', handleUserActivity);\n    window.addEventListener('keydown', handleUserActivity);\n    return () => {\n      window.removeEventListener('mousemove', handleUserActivity);\n      window.removeEventListener('click', handleUserActivity);\n      window.removeEventListener('keydown', handleUserActivity);\n      clearTimeout(timeoutIDRef.current);\n    };\n  }, []);\n\n  return isUserActive;\n}\n","import React, { useRef, useEffect } from 'react';\nimport { IVideoTrack } from '../../types';\nimport { styled } from '@material-ui/core/styles';\nimport { Track } from 'twilio-video';\n\nconst Video = styled('video')({\n  width: '100%',\n  maxHeight: '100%',\n  objectFit: 'contain',\n});\n\ninterface VideoTrackProps {\n  track: IVideoTrack;\n  isLocal?: boolean;\n  priority?: Track.Priority;\n}\n\nexport default function VideoTrack({ track, isLocal, priority }: VideoTrackProps) {\n  const ref = useRef<HTMLVideoElement>(null!);\n\n  useEffect(() => {\n    const el = ref.current;\n    el.muted = true;\n    if (track.setPriority && priority) {\n      track.setPriority(priority);\n    }\n    track.attach(el);\n    return () => {\n      track.detach(el);\n      if (track.setPriority && priority) {\n        // Passing `null` to setPriority will set the track's priority to that which it was published with.\n        track.setPriority(null);\n      }\n    };\n  }, [track, priority]);\n\n  // The local video track is mirrored.\n  const style = isLocal ? { transform: 'rotateY(180deg)' } : {};\n\n  return <Video ref={ref} style={style} />;\n}\n","import React from 'react';\nimport { LocalVideoTrack } from 'twilio-video';\nimport VideoTrack from '../VideoTrack/VideoTrack';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\n\nexport default function LocalVideoPreview() {\n  const { localTracks } = useVideoContext();\n\n  const videoTrack = localTracks.find(track => track.name === 'camera') as LocalVideoTrack;\n\n  return videoTrack ? <VideoTrack track={videoTrack} isLocal /> : null;\n}\n","import React from 'react';\nimport { styled } from '@material-ui/core/styles';\n\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport useFullScreenToggle from '../../hooks/useFullScreenToggle/useFullScreenToggle';\n\nconst FullscreenButton = styled(IconButton)({\n  marginLeft: 'auto',\n});\n\nexport default function ToggleFullscreenButton() {\n  const [isFullScreen, toggleFullScreen] = useFullScreenToggle();\n\n  return (\n    <FullscreenButton aria-label={`full screen`} onClick={toggleFullScreen}>\n      {isFullScreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\n    </FullscreenButton>\n  );\n}\n","import { useCallback, useState, useEffect } from 'react';\nimport fscreen from 'fscreen';\n\nexport default function useFullScreenToggle() {\n  const [isFullScreen, setIsFullScreen] = useState<Boolean>(!!fscreen.fullscreenElement);\n\n  useEffect(() => {\n    const onFullScreenChange = () => setIsFullScreen(!!fscreen.fullscreenElement);\n    fscreen.addEventListener('fullscreenchange', onFullScreenChange);\n    return () => {\n      fscreen.removeEventListener('fullscreenchange', onFullScreenChange);\n    };\n  }, []);\n\n  const toggleFullScreen = useCallback(() => {\n    isFullScreen ? fscreen.exitFullscreen() : fscreen.requestFullscreen(document.documentElement);\n  }, [isFullScreen]);\n\n  return [isFullScreen, toggleFullScreen] as const;\n}\n","import React, { PropsWithChildren } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { version as appVersion } from '../../../../package.json';\nimport Video from 'twilio-video';\n\ninterface AboutDialogProps {\n  open: boolean;\n  onClose(): void;\n}\n\nfunction AboutDialog({ open, onClose }: PropsWithChildren<AboutDialogProps>) {\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth={true} maxWidth=\"xs\">\n      <DialogTitle>About:</DialogTitle>\n      <DialogContent>\n        <DialogContentText>Browser supported: {String(Video.isSupported)}</DialogContentText>\n        <DialogContentText>SDK Version: {Video.version}</DialogContentText>\n        <DialogContentText>App Version: {appVersion}</DialogContentText>\n        <DialogContentText>Deployed Tag: {process.env.REACT_APP_GIT_TAG || 'N/A'}</DialogContentText>\n        <DialogContentText>Deployed Commit Hash: {process.env.REACT_APP_GIT_COMMIT || 'N/A'}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\" autoFocus>\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default AboutDialog;\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport Person from '@material-ui/icons/Person';\nimport { StateContextType } from '../../../state';\n\nconst useStyles = makeStyles({\n  red: {\n    color: 'white',\n    backgroundColor: '#F22F46',\n  },\n});\n\nexport function getInitials(name: string) {\n  return name\n    .split(' ')\n    .map(text => text[0])\n    .join('')\n    .toUpperCase();\n}\n\nexport default function UserAvatar({ user }: { user: StateContextType['user'] }) {\n  const classes = useStyles();\n  const { displayName, photoURL } = user!;\n\n  return photoURL ? (\n    <Avatar src={photoURL} />\n  ) : (\n    <Avatar className={classes.red}>{displayName ? getInitials(displayName) : <Person />}</Avatar>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n};\n\nexport default function useFirebaseAuth() {\n  const [user, setUser] = useState<firebase.User | null>(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n\n  const getToken = useCallback(\n    async (identity: string, roomName: string) => {\n      const headers = new window.Headers();\n\n      const idToken = await user!.getIdToken();\n      headers.set('Authorization', idToken);\n\n      const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\n      const params = new window.URLSearchParams({ identity, roomName });\n\n      return fetch(`${endpoint}?${params}`, { headers }).then(res => res.text());\n    },\n    [user]\n  );\n\n  useEffect(() => {\n    firebase.initializeApp(firebaseConfig);\n    firebase.auth().onAuthStateChanged(user => {\n      setUser(user);\n      setIsAuthReady(true);\n    });\n  }, []);\n\n  const signIn = useCallback(() => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('https://www.googleapis.com/auth/plus.login');\n\n    return firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(user => {\n        setUser(user.user);\n      });\n  }, []);\n\n  const signOut = useCallback(() => {\n    return firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        setUser(null);\n      });\n  }, []);\n\n  return { user, signIn, signOut, isAuthReady, getToken };\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport function getPasscode() {\n  const match = window.location.search.match(/passcode=(.*)&?/);\n  const passcode = match ? match[1] : window.sessionStorage.getItem('passcode');\n  return passcode;\n}\n\nexport function fetchToken(name: string, room: string, passcode: string) {\n  return fetch(`/token`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ user_identity: name, room_name: room, passcode }),\n  });\n}\n\nexport function verifyPasscode(passcode: string) {\n  return fetchToken('temp-name', 'temp-room', passcode).then(async res => {\n    const jsonResponse = await res.json();\n    if (res.status === 401) {\n      return { isValid: false, error: jsonResponse.error?.message };\n    }\n\n    if (res.ok && jsonResponse.token) {\n      return { isValid: true };\n    }\n  });\n}\n\nexport function getErrorMessage(message: string) {\n  switch (message) {\n    case 'passcode incorrect':\n      return 'Passcode is incorrect';\n    case 'passcode expired':\n      return 'Passcode has expired';\n    default:\n      return message;\n  }\n}\n\nexport default function usePasscodeAuth() {\n  const history = useHistory();\n\n  const [user, setUser] = useState<{ displayName: undefined; photoURL: undefined; passcode: string } | null>(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n\n  const getToken = useCallback(\n    (name: string, room: string) => {\n      return fetchToken(name, room, user!.passcode)\n        .then(res => res.json())\n        .then(res => res.token as string);\n    },\n    [user]\n  );\n\n  useEffect(() => {\n    const passcode = getPasscode();\n\n    if (passcode) {\n      verifyPasscode(passcode)\n        .then(verification => {\n          if (verification?.isValid) {\n            setUser({ passcode } as any);\n            window.sessionStorage.setItem('passcode', passcode);\n            history.replace(window.location.pathname);\n          }\n        })\n        .then(() => setIsAuthReady(true));\n    } else {\n      setIsAuthReady(true);\n    }\n  }, [history]);\n\n  const signIn = useCallback((passcode: string) => {\n    return verifyPasscode(passcode).then(verification => {\n      if (verification?.isValid) {\n        setUser({ passcode } as any);\n        window.sessionStorage.setItem('passcode', passcode);\n      } else {\n        throw new Error(getErrorMessage(verification?.error));\n      }\n    });\n  }, []);\n\n  const signOut = useCallback(() => {\n    setUser(null);\n    window.sessionStorage.removeItem('passcode');\n    return Promise.resolve();\n  }, []);\n\n  return { user, isAuthReady, getToken, signIn, signOut };\n}\n","import React, { createContext, useContext, useState } from 'react';\nimport { TwilioError } from 'twilio-video';\nimport useFirebaseAuth from './useFirebaseAuth/useFirebaseAuth';\nimport usePasscodeAuth from './usePasscodeAuth/usePasscodeAuth';\nimport { User } from 'firebase';\n\nexport interface StateContextType {\n  error: TwilioError | null;\n  setError(error: TwilioError | null): void;\n  getToken(name: string, room: string, passcode?: string): Promise<string>;\n  user?: User | null | { displayName: undefined; photoURL: undefined; passcode?: string };\n  signIn?(passcode?: string): Promise<void>;\n  signOut?(): Promise<void>;\n  isAuthReady?: boolean;\n  isFetching: boolean;\n}\n\nexport const StateContext = createContext<StateContextType>(null!);\n\n/*\n  The 'react-hooks/rules-of-hooks' linting rules prevent React Hooks fron being called\n  inside of if() statements. This is because hooks must always be called in the same order\n  every time a component is rendered. The 'react-hooks/rules-of-hooks' rule is disabled below\n  because the \"if (process.env.REACT_APP_SET_AUTH === 'firebase')\" statements are evaluated\n  at build time (not runtime). If the statement evaluates to false, then the code is not\n  included in the bundle that is produced (due to tree-shaking). Thus, in this instance, it\n  is ok to call hooks inside if() statements.\n*/\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\n  const [error, setError] = useState<TwilioError | null>(null);\n  const [isFetching, setIsFetching] = useState(false);\n\n  let contextValue = {\n    error,\n    setError,\n    isFetching,\n  } as StateContextType;\n\n  if (process.env.REACT_APP_SET_AUTH === 'firebase') {\n    contextValue = {\n      ...contextValue,\n      ...useFirebaseAuth(), // eslint-disable-line react-hooks/rules-of-hooks\n    };\n  } else if (process.env.REACT_APP_SET_AUTH === 'passcode') {\n    contextValue = {\n      ...contextValue,\n      ...usePasscodeAuth(), // eslint-disable-line react-hooks/rules-of-hooks\n    };\n  } else {\n    contextValue = {\n      ...contextValue,\n      getToken: async (identity, roomName) => {\n        const headers = new window.Headers();\n        const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\n        const params = new window.URLSearchParams({ identity, roomName });\n\n        return fetch(`${endpoint}?${params}`, { headers }).then(res => res.text());\n      },\n    };\n  }\n\n  const getToken: StateContextType['getToken'] = (name, room) => {\n    setIsFetching(true);\n    return contextValue\n      .getToken(name, room)\n      .then(res => {\n        setIsFetching(false);\n        return res;\n      })\n      .catch(err => {\n        setError(err);\n        setIsFetching(false);\n        return Promise.reject(err);\n      });\n  };\n\n  return <StateContext.Provider value={{ ...contextValue, getToken }}>{props.children}</StateContext.Provider>;\n}\n\nexport function useAppState() {\n  const context = useContext(StateContext);\n  if (!context) {\n    throw new Error('useAppState must be used within the AppStateProvider');\n  }\n  return context;\n}\n","import React, { useState, useRef, useCallback } from 'react';\nimport AboutDialog from '../AboutDialog/AboutDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuContainer from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport UserAvatar from '../UserAvatar/UserAvatar';\n\nimport { useAppState } from '../../../state';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nexport default function Menu() {\n  const { user, signOut } = useAppState();\n  const { room, localTracks } = useVideoContext();\n\n  const [aboutOpen, setAboutOpen] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const anchorRef = useRef<HTMLDivElement>(null);\n\n  const handleSignOut = useCallback(() => {\n    room.disconnect?.();\n    localTracks.forEach(track => track.stop());\n    signOut?.();\n  }, [room.disconnect, localTracks, signOut]);\n\n  return (\n    <div ref={anchorRef}>\n      <IconButton color=\"inherit\" onClick={() => setMenuOpen(state => !state)}>\n        {user ? <UserAvatar user={user} /> : <MoreIcon />}\n      </IconButton>\n      <MenuContainer open={menuOpen} onClose={() => setMenuOpen(state => !state)} anchorEl={anchorRef.current}>\n        {user?.displayName && <MenuItem disabled>{user.displayName}</MenuItem>}\n        <MenuItem onClick={() => setAboutOpen(true)}>About</MenuItem>\n        {user && <MenuItem onClick={handleSignOut}>Logout</MenuItem>}\n      </MenuContainer>\n      <AboutDialog\n        open={aboutOpen}\n        onClose={() => {\n          setAboutOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n    </div>\n  );\n}\n","import React, { ChangeEvent, FormEvent, useState, useEffect } from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TextField from '@material-ui/core/TextField';\nimport ToggleFullscreenButton from '../ToggleFullScreenButton/ToggleFullScreenButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Menu from './Menu/Menu';\n\nimport { useAppState } from '../../state';\nimport { useParams } from 'react-router-dom';\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      backgroundColor: theme.palette.background.default,\n    },\n    form: {\n      display: 'flex',\n      alignItems: 'center',\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: 200,\n    },\n    loadingSpinner: {\n      marginLeft: '1em',\n    },\n    displayName: {\n      marginLeft: '2.2em',\n      minWidth: '200px',\n      fontWeight: 600,\n    },\n  })\n);\n\nexport default function MenuBar() {\n  const classes = useStyles();\n  const { URLRoomName } = useParams();\n  const { user, getToken, isFetching } = useAppState();\n  const { isConnecting, connect } = useVideoContext();\n  const roomState = useRoomState();\n\n  const [name, setName] = useState<string>(user?.displayName || '');\n  const [roomName, setRoomName] = useState<string>('');\n\n  useEffect(() => {\n    if (URLRoomName) {\n      setRoomName(URLRoomName);\n    }\n  }, [URLRoomName]);\n\n  const handleNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  const handleRoomNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setRoomName(event.target.value);\n  };\n\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    // If this app is deployed as a twilio function, don't change the URL beacuse routing isn't supported.\n    if (!window.location.origin.includes('twil.io')) {\n      window.history.replaceState(null, '', window.encodeURI(`/room/${roomName}`));\n    }\n    getToken(name, roomName).then(token => connect(token));\n  };\n\n  return (\n    <AppBar className={classes.container} position=\"static\">\n      <Toolbar>\n        {roomState === 'disconnected' ? (\n          <form className={classes.form} onSubmit={handleSubmit}>\n            {!user?.displayName ? (\n              <TextField\n                id=\"menu-name\"\n                label=\"Name\"\n                className={classes.textField}\n                value={name}\n                onChange={handleNameChange}\n                margin=\"dense\"\n              />\n            ) : (\n              <Typography className={classes.displayName} variant=\"body1\">\n                {user.displayName}\n              </Typography>\n            )}\n            <TextField\n              id=\"menu-room\"\n              label=\"Room\"\n              className={classes.textField}\n              value={roomName}\n              onChange={handleRoomNameChange}\n              margin=\"dense\"\n            />\n            <Button\n              type=\"submit\"\n              color=\"primary\"\n              variant=\"contained\"\n              disabled={isConnecting || !name || !roomName || isFetching}\n            >\n              Join Room\n            </Button>\n            {(isConnecting || isFetching) && <CircularProgress className={classes.loadingSpinner} />}\n          </form>\n        ) : (\n          <h3>{roomName}</h3>\n        )}\n        <ToggleFullscreenButton />\n        <Menu />\n      </Toolbar>\n    </AppBar>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport InfoIcon from '@material-ui/icons/Info';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { SnackbarContent } from '@material-ui/core';\n\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\n\nconst useStyles = makeStyles({\n  snackbar: {\n    backgroundColor: '#6db1ff',\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  icon: {\n    marginRight: '0.8em',\n  },\n});\n\nexport default function ReconnectingNotification() {\n  const classes = useStyles();\n  const roomState = useRoomState();\n\n  return (\n    <Snackbar anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }} open={roomState === 'reconnecting'}>\n      <SnackbarContent\n        className={classes.snackbar}\n        message={\n          <span className={classes.message}>\n            <InfoIcon className={classes.icon} />\n            Reconnecting&hellip;\n          </span>\n        }\n      />\n    </Snackbar>\n  );\n}\n","import React from 'react';\nimport { styled } from '@material-ui/core';\n\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\n\nconst BandwidthWarningContainer = styled('div')({\n  position: 'absolute',\n  zIndex: 1,\n  width: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'center',\n});\n\nconst Warning = styled('h3')({\n  textAlign: 'center',\n  margin: '0.6em 0',\n});\n\nexport default function BandwidthWarning() {\n  return (\n    <BandwidthWarningContainer>\n      <div>\n        <ErrorOutlineIcon fontSize=\"large\" />\n      </div>\n      <Warning>Insufficient Bandwidth</Warning>\n    </BandwidthWarningContainer>\n  );\n}\n","import React from 'react';\nimport { styled } from '@material-ui/core/styles';\n\nconst Container = styled('div')({\n  display: 'flex',\n  alignItems: 'flex-end',\n  '& div': {\n    width: '2px',\n    border: '1px solid black',\n    boxSizing: 'content-box',\n    '&:not(:last-child)': {\n      borderRight: 'none',\n    },\n  },\n});\n\nconst STEP = 3;\n\nexport default function NetworkQualityLevel({ qualityLevel }: { qualityLevel: number | null }) {\n  if (qualityLevel === null) return null;\n  return (\n    <Container>\n      {[0, 1, 2, 3, 4].map(level => (\n        <div\n          key={level}\n          style={{\n            height: `${STEP * (level + 1)}px`,\n            background: qualityLevel > level ? '#0c0' : '#040',\n          }}\n        />\n      ))}\n    </Container>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LocalParticipant, RemoteParticipant } from 'twilio-video';\nimport useParticipantIsReconnecting from '../../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\nimport { Tooltip } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  indicator: {\n    width: '10px',\n    height: '10px',\n    borderRadius: '100%',\n    background: '#0c0',\n    display: 'inline-block',\n    marginRight: '3px',\n  },\n  isReconnecting: {\n    background: '#ffb100',\n  },\n});\n\nexport default function ParticipantConnectionIndicator({\n  participant,\n}: {\n  participant: LocalParticipant | RemoteParticipant;\n}) {\n  const isReconnecting = useParticipantIsReconnecting(participant);\n  const classes = useStyles();\n  return (\n    <Tooltip title={isReconnecting ? 'Participant is reconnecting' : 'Participant is connected'}>\n      <span className={clsx(classes.indicator, { [classes.isReconnecting]: isReconnecting })}></span>\n    </Tooltip>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { LocalParticipant, RemoteParticipant } from 'twilio-video';\n\nexport default function useParticipantIsReconnecting(participant: LocalParticipant | RemoteParticipant) {\n  const [isReconnecting, setIsReconnecting] = useState(false);\n\n  useEffect(() => {\n    const handleReconnecting = () => setIsReconnecting(true);\n    const handleReconnected = () => setIsReconnecting(false);\n\n    participant.on('reconnecting', handleReconnecting);\n    participant.on('reconnected', handleReconnected);\n    return () => {\n      participant.off('reconnecting', handleReconnecting);\n      participant.off('reconnected', handleReconnected);\n    };\n  }, [participant]);\n\n  return isReconnecting;\n}\n","import React from 'react';\nimport { Pin } from '@primer/octicons-react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default function PinIcon() {\n  return (\n    <Tooltip title=\"Participant is pinned. Click to un-pin.\" placement=\"top\">\n      <SvgIcon style={{ float: 'right', fontSize: '29px' }}>\n        <Pin />\n      </SvgIcon>\n    </Tooltip>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { LocalTrackPublication, Participant, RemoteTrackPublication } from 'twilio-video';\n\ntype TrackPublication = LocalTrackPublication | RemoteTrackPublication;\n\nexport default function usePublications(participant: Participant) {\n  const [publications, setPublications] = useState<TrackPublication[]>([]);\n\n  useEffect(() => {\n    // Reset the publications when the 'participant' variable changes.\n    setPublications(Array.from(participant.tracks.values()) as TrackPublication[]);\n\n    const publicationAdded = (publication: TrackPublication) =>\n      setPublications(prevPublications => [...prevPublications, publication]);\n    const publicationRemoved = (publication: TrackPublication) =>\n      setPublications(prevPublications => prevPublications.filter(p => p !== publication));\n\n    participant.on('trackPublished', publicationAdded);\n    participant.on('trackUnpublished', publicationRemoved);\n    return () => {\n      participant.off('trackPublished', publicationAdded);\n      participant.off('trackUnpublished', publicationRemoved);\n    };\n  }, [participant]);\n\n  return publications;\n}\n","import { useState, useEffect } from 'react';\nimport { LocalVideoTrack, RemoteVideoTrack } from 'twilio-video';\n\ntype TrackType = RemoteVideoTrack | LocalVideoTrack | undefined | null;\n\n// The 'switchedOff' event is emitted when there is not enough bandwidth to support\n// a track. See: https://www.twilio.com/docs/video/tutorials/using-bandwidth-profile-api#understanding-track-switch-offs\n\nexport default function useIsTrackSwitchedOff(track: TrackType) {\n  const [isSwitchedOff, setIsSwitchedOff] = useState(track && track.isSwitchedOff);\n\n  useEffect(() => {\n    // Reset the value if the 'track' variable changes\n    setIsSwitchedOff(track && track.isSwitchedOff);\n\n    if (track) {\n      const handleSwitchedOff = () => setIsSwitchedOff(true);\n      const handleSwitchedOn = () => setIsSwitchedOff(false);\n      track.on('switchedOff', handleSwitchedOff);\n      track.on('switchedOn', handleSwitchedOn);\n      return () => {\n        track.off('switchedOff', handleSwitchedOff);\n        track.off('switchedOn', handleSwitchedOn);\n      };\n    }\n  }, [track]);\n\n  return !!isSwitchedOff;\n}\n","import { useEffect, useState } from 'react';\nimport { LocalTrackPublication, RemoteTrackPublication } from 'twilio-video';\n\nexport default function useTrack(publication: LocalTrackPublication | RemoteTrackPublication | undefined) {\n  const [track, setTrack] = useState(publication && publication.track);\n\n  useEffect(() => {\n    // Reset the track when the 'publication' variable changes.\n    setTrack(publication && publication.track);\n\n    if (publication) {\n      const removeTrack = () => setTrack(null);\n\n      publication.on('subscribed', setTrack);\n      publication.on('unsubscribed', removeTrack);\n      return () => {\n        publication.off('subscribed', setTrack);\n        publication.off('unsubscribed', removeTrack);\n      };\n    }\n  }, [publication]);\n\n  return track;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { LocalParticipant, RemoteParticipant, RemoteVideoTrack, LocalVideoTrack } from 'twilio-video';\n\nimport BandwidthWarning from '../BandwidthWarning/BandwidthWarning';\nimport MicOff from '@material-ui/icons/MicOff';\nimport NetworkQualityLevel from '../NewtorkQualityLevel/NetworkQualityLevel';\nimport ParticipantConnectionIndicator from './ParticipantConnectionIndicator/ParticipantConnectionIndicator';\nimport PinIcon from './PinIcon/PinIcon';\nimport ScreenShare from '@material-ui/icons/ScreenShare';\nimport VideocamOff from '@material-ui/icons/VideocamOff';\n\nimport useParticipantNetworkQualityLevel from '../../hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublicationIsTrackEnabled from '../../hooks/usePublicationIsTrackEnabled/usePublicationIsTrackEnabled';\nimport useTrack from '../../hooks/useTrack/useTrack';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      height: `${(theme.sidebarWidth * 9) / 16}px`,\n      overflow: 'hidden',\n      cursor: 'pointer',\n      '& video': {\n        filter: 'none',\n      },\n      '& svg': {\n        stroke: 'black',\n        strokeWidth: '0.8px',\n      },\n    },\n    isVideoSwitchedOff: {\n      '& video': {\n        filter: 'blur(4px) grayscale(1) brightness(0.5)',\n      },\n    },\n    infoContainer: {\n      position: 'absolute',\n      zIndex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      height: '100%',\n      padding: '0.4em',\n      width: '100%',\n      background: 'transparent',\n    },\n    hideVideo: {\n      background: 'black',\n    },\n    identity: {\n      background: 'rgba(0, 0, 0, 0.7)',\n      padding: '0.1em 0.3em',\n      margin: 0,\n      display: 'flex',\n      alignItems: 'center',\n    },\n    infoRow: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n  })\n);\n\ninterface ParticipantInfoProps {\n  participant: LocalParticipant | RemoteParticipant;\n  children: React.ReactNode;\n  onClick: () => void;\n  isSelected: boolean;\n}\n\nexport default function ParticipantInfo({ participant, onClick, isSelected, children }: ParticipantInfoProps) {\n  const publications = usePublications(participant);\n\n  const audioPublication = publications.find(p => p.kind === 'audio');\n  const videoPublication = publications.find(p => p.trackName === 'camera');\n\n  const networkQualityLevel = useParticipantNetworkQualityLevel(participant);\n  const isAudioEnabled = usePublicationIsTrackEnabled(audioPublication);\n  const isVideoEnabled = Boolean(videoPublication);\n  const isScreenShareEnabled = publications.find(p => p.trackName === 'screen');\n\n  const videoTrack = useTrack(videoPublication);\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\n\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.container, {\n        [classes.isVideoSwitchedOff]: isVideoSwitchedOff,\n      })}\n      onClick={onClick}\n      data-cy-participant={participant.identity}\n    >\n      <div className={clsx(classes.infoContainer, { [classes.hideVideo]: !isVideoEnabled })}>\n        <div className={classes.infoRow}>\n          <h4 className={classes.identity}>\n            <ParticipantConnectionIndicator participant={participant} />\n            {participant.identity}\n          </h4>\n          <NetworkQualityLevel qualityLevel={networkQualityLevel} />\n        </div>\n        <div>\n          {!isAudioEnabled && <MicOff data-cy-audio-mute-icon />}\n          {!isVideoEnabled && <VideocamOff />}\n          {isScreenShareEnabled && <ScreenShare />}\n          {isSelected && <PinIcon />}\n        </div>\n      </div>\n      {isVideoSwitchedOff && <BandwidthWarning />}\n      {children}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { LocalParticipant, RemoteParticipant } from 'twilio-video';\n\nexport default function useParticipantNetworkQualityLevel(participant: LocalParticipant | RemoteParticipant) {\n  const [networkQualityLevel, setNetworkQualityLevel] = useState(participant.networkQualityLevel);\n\n  useEffect(() => {\n    const handleNewtorkQualityLevelChange = (newNetworkQualityLevel: number) =>\n      setNetworkQualityLevel(newNetworkQualityLevel);\n\n    setNetworkQualityLevel(participant.networkQualityLevel);\n    participant.on('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\n    return () => {\n      participant.off('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\n    };\n  }, [participant]);\n\n  return networkQualityLevel;\n}\n","import { useState, useEffect } from 'react';\nimport { LocalTrackPublication, RemoteTrackPublication } from 'twilio-video';\n\ntype PublicationType = LocalTrackPublication | RemoteTrackPublication;\n\nexport default function usePublicationIsTrackEnabled(publication?: PublicationType) {\n  const [isEnabled, setIsEnabled] = useState(publication ? publication.isTrackEnabled : false);\n\n  useEffect(() => {\n    setIsEnabled(publication ? publication.isTrackEnabled : false);\n\n    if (publication) {\n      const setEnabled = () => setIsEnabled(true);\n      const setDisabled = () => setIsEnabled(false);\n      publication.on('trackEnabled', setEnabled);\n      publication.on('trackDisabled', setDisabled);\n      return () => {\n        publication.off('trackEnabled', setEnabled);\n        publication.off('trackDisabled', setDisabled);\n      };\n    }\n  }, [publication]);\n\n  return isEnabled;\n}\n","import React, { useEffect, useRef } from 'react';\nimport { AudioTrack as IAudioTrack } from 'twilio-video';\n\ninterface AudioTrackProps {\n  track: IAudioTrack;\n}\n\nexport default function AudioTrack({ track }: AudioTrackProps) {\n  const ref = useRef<HTMLAudioElement>(null!);\n\n  useEffect(() => {\n    const el = ref.current;\n    track.attach(el);\n    return () => {\n      track.detach(el);\n    };\n  }, [track]);\n\n  return <audio ref={ref} />;\n}\n","import React from 'react';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport AudioTrack from '../AudioTrack/AudioTrack';\nimport VideoTrack from '../VideoTrack/VideoTrack';\n\nimport { IVideoTrack } from '../../types';\nimport {\n  AudioTrack as IAudioTrack,\n  LocalTrackPublication,\n  Participant,\n  RemoteTrackPublication,\n  Track,\n} from 'twilio-video';\n\ninterface PublicationProps {\n  publication: LocalTrackPublication | RemoteTrackPublication;\n  participant: Participant;\n  isLocal: boolean;\n  disableAudio?: boolean;\n  videoPriority?: Track.Priority;\n}\n\nexport default function Publication({ publication, isLocal, disableAudio, videoPriority }: PublicationProps) {\n  const track = useTrack(publication);\n\n  if (!track) return null;\n\n  switch (track.kind) {\n    case 'video':\n      return (\n        <VideoTrack\n          track={track as IVideoTrack}\n          priority={videoPriority}\n          isLocal={track.name === 'camera' && isLocal}\n        />\n      );\n    case 'audio':\n      return disableAudio ? null : <AudioTrack track={track as IAudioTrack} />;\n    default:\n      return null;\n  }\n}\n","import React from 'react';\nimport { LocalParticipant, RemoteParticipant, Track } from 'twilio-video';\nimport Publication from '../Publication/Publication';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\n\ninterface ParticipantTracksProps {\n  participant: LocalParticipant | RemoteParticipant;\n  disableAudio?: boolean;\n  enableScreenShare?: boolean;\n  videoPriority?: Track.Priority;\n}\n\n/*\n *  The object model for the Room object (found here: https://www.twilio.com/docs/video/migrating-1x-2x#object-model) shows\n *  that Participant objects have TrackPublications, and TrackPublication objects have Tracks.\n *\n *  The React components in this application follow the same pattern. This ParticipantTracks component renders Publications,\n *  and the Publication component renders Tracks.\n */\n\nexport default function ParticipantTracks({\n  participant,\n  disableAudio,\n  enableScreenShare,\n  videoPriority,\n}: ParticipantTracksProps) {\n  const { room } = useVideoContext();\n  const publications = usePublications(participant);\n  const isLocal = participant === room.localParticipant;\n\n  let filteredPublications;\n\n  if (enableScreenShare && publications.some(p => p.trackName === 'screen')) {\n    filteredPublications = publications.filter(p => p.trackName !== 'camera');\n  } else {\n    filteredPublications = publications.filter(p => p.trackName !== 'screen');\n  }\n\n  return (\n    <>\n      {filteredPublications.map(publication => (\n        <Publication\n          key={publication.kind}\n          publication={publication}\n          participant={participant}\n          isLocal={isLocal}\n          disableAudio={disableAudio}\n          videoPriority={videoPriority}\n        />\n      ))}\n    </>\n  );\n}\n","import React from 'react';\nimport ParticipantInfo from '../ParticipantInfo/ParticipantInfo';\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\nimport { LocalParticipant, RemoteParticipant } from 'twilio-video';\n\ninterface ParticipantProps {\n  participant: LocalParticipant | RemoteParticipant;\n  disableAudio?: boolean;\n  enableScreenShare?: boolean;\n  onClick: () => void;\n  isSelected: boolean;\n}\n\nexport default function Participant({\n  participant,\n  disableAudio,\n  enableScreenShare,\n  onClick,\n  isSelected,\n}: ParticipantProps) {\n  return (\n    <ParticipantInfo participant={participant} onClick={onClick} isSelected={isSelected}>\n      <ParticipantTracks participant={participant} disableAudio={disableAudio} enableScreenShare={enableScreenShare} />\n    </ParticipantInfo>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\nimport { RemoteParticipant } from 'twilio-video';\n\nexport default function useDominantSpeaker() {\n  const { room } = useVideoContext();\n  const [dominantSpeaker, setDominantSpeaker] = useState(room.dominantSpeaker);\n\n  useEffect(() => {\n    // Sometimes, the 'dominantSpeakerChanged' event can emit 'null', which means that\n    // there is no dominant speaker. If we change the main participant when 'null' is\n    // emitted, the effect can be jarring to the user. Here we ignore any 'null' values\n    // and continue to display the previous dominant speaker as the main participant.\n    const handleDominantSpeakerChanged = (newDominantSpeaker: RemoteParticipant) => {\n      if (newDominantSpeaker !== null) {\n        setDominantSpeaker(newDominantSpeaker);\n      }\n    };\n\n    // Since 'null' values are ignored, we will need to listen for the 'participantDisconnected'\n    // event, so we can set the dominantSpeaker to 'null' when they disconnect.\n    const handleParticipantDisconnected = (participant: RemoteParticipant) => {\n      setDominantSpeaker(prevDominantSpeaker => {\n        return prevDominantSpeaker === participant ? null : prevDominantSpeaker;\n      });\n    };\n\n    room.on('dominantSpeakerChanged', handleDominantSpeakerChanged);\n    room.on('participantDisconnected', handleParticipantDisconnected);\n    return () => {\n      room.off('dominantSpeakerChanged', handleDominantSpeakerChanged);\n      room.off('participantDisconnected', handleParticipantDisconnected);\n    };\n  }, [room]);\n\n  return dominantSpeaker;\n}\n","import { useEffect, useState } from 'react';\nimport { RemoteParticipant } from 'twilio-video';\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useParticipants() {\n  const { room } = useVideoContext();\n  const dominantSpeaker = useDominantSpeaker();\n  const [participants, setParticipants] = useState(Array.from(room.participants.values()));\n\n  // When the dominant speaker changes, they are moved to the front of the participants array.\n  // This means that the most recent dominant speakers will always be near the top of the\n  // ParticipantStrip component.\n  useEffect(() => {\n    if (dominantSpeaker) {\n      setParticipants(prevParticipants => [\n        dominantSpeaker,\n        ...prevParticipants.filter(participant => participant !== dominantSpeaker),\n      ]);\n    }\n  }, [dominantSpeaker]);\n\n  useEffect(() => {\n    const participantConnected = (participant: RemoteParticipant) =>\n      setParticipants(prevParticipants => [...prevParticipants, participant]);\n    const participantDisconnected = (participant: RemoteParticipant) =>\n      setParticipants(prevParticipants => prevParticipants.filter(p => p !== participant));\n    room.on('participantConnected', participantConnected);\n    room.on('participantDisconnected', participantDisconnected);\n    return () => {\n      room.off('participantConnected', participantConnected);\n      room.off('participantDisconnected', participantDisconnected);\n    };\n  }, [room]);\n\n  return participants;\n}\n","import React from 'react';\nimport Participant from '../Participant/Participant';\nimport { styled } from '@material-ui/core/styles';\nimport useParticipants from '../../hooks/useParticipants/useParticipants';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\n\nconst Container = styled('aside')(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  bottom: 0,\n  right: `calc(100% - ${theme.sidebarWidth}px)`,\n  left: 0,\n  padding: '0.5em',\n  overflowY: 'auto',\n}));\n\nexport default function ParticipantStrip() {\n  const {\n    room: { localParticipant },\n  } = useVideoContext();\n  const participants = useParticipants();\n  const [selectedParticipant, setSelectedParticipant] = useSelectedParticipant();\n\n  return (\n    <Container>\n      <Participant\n        participant={localParticipant}\n        isSelected={selectedParticipant === localParticipant}\n        onClick={() => setSelectedParticipant(localParticipant)}\n      />\n      {participants.map(participant => (\n        <Participant\n          key={participant.sid}\n          participant={participant}\n          isSelected={selectedParticipant === participant}\n          onClick={() => setSelectedParticipant(participant)}\n        />\n      ))}\n    </Container>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LocalParticipant, RemoteParticipant, RemoteVideoTrack, LocalVideoTrack } from 'twilio-video';\n\nimport BandwidthWarning from '../BandwidthWarning/BandwidthWarning';\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport VideocamOff from '@material-ui/icons/VideocamOff';\n\nconst useStyles = makeStyles({\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  isVideoSwitchedOff: {\n    '& video': {\n      filter: 'blur(4px) grayscale(1) brightness(0.5)',\n    },\n  },\n  identity: {\n    background: 'rgba(0, 0, 0, 0.7)',\n    padding: '0.1em 0.3em',\n    margin: '1em',\n    fontSize: '1.2em',\n    display: 'inline-flex',\n    '& svg': {\n      marginLeft: '0.3em',\n    },\n  },\n  infoContainer: {\n    position: 'absolute',\n    zIndex: 1,\n    height: '100%',\n    padding: '0.4em',\n    width: '100%',\n  },\n});\n\ninterface MainParticipantInfoProps {\n  participant: LocalParticipant | RemoteParticipant;\n  children: React.ReactNode;\n}\n\nexport default function MainParticipantInfo({ participant, children }: MainParticipantInfoProps) {\n  const classes = useStyles();\n\n  const publications = usePublications(participant);\n  const videoPublication = publications.find(p => p.trackName === 'camera');\n  const screenSharePublication = publications.find(p => p.trackName === 'screen');\n  const isVideoEnabled = Boolean(videoPublication);\n\n  const videoTrack = useTrack(screenSharePublication || videoPublication);\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\n\n  return (\n    <div\n      data-cy-main-participant\n      className={clsx(classes.container, { [classes.isVideoSwitchedOff]: isVideoSwitchedOff })}\n    >\n      <div className={classes.infoContainer}>\n        <h4 className={classes.identity}>\n          {participant.identity}\n          {!isVideoEnabled && <VideocamOff />}\n        </h4>\n      </div>\n      {isVideoSwitchedOff && <BandwidthWarning />}\n      {children}\n    </div>\n  );\n}\n","import MainParticipantInfo from '../MainParticipantInfo/MainParticipantInfo';\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\nimport React from 'react';\nimport useMainSpeaker from '../../hooks/useMainSpeaker/useMainSpeaker';\n\nexport default function MainParticipant() {\n  const mainParticipant = useMainSpeaker();\n  return (\n    /* audio is disabled for this participant component because this participant's audio \n       is already being rendered in the <ParticipantStrip /> component.  */\n    <MainParticipantInfo participant={mainParticipant}>\n      <ParticipantTracks participant={mainParticipant} disableAudio enableScreenShare videoPriority=\"high\" />\n    </MainParticipantInfo>\n  );\n}\n","import useVideoContext from '../useVideoContext/useVideoContext';\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\nimport useParticipants from '../useParticipants/useParticipants';\nimport useScreenShareParticipant from '../useScreenShareParticipant/useScreenShareParticipant';\nimport useSelectedParticipant from '../../components/VideoProvider/useSelectedParticipant/useSelectedParticipant';\n\nexport default function useMainSpeaker() {\n  const [selectedParticipant] = useSelectedParticipant();\n  const screenShareParticipant = useScreenShareParticipant();\n  const dominantSpeaker = useDominantSpeaker();\n  const participants = useParticipants();\n  const {\n    room: { localParticipant },\n  } = useVideoContext();\n\n  // The participant that is returned is displayed in the main video area. Changing the order of the following\n  // variables will change the how the main speaker is determined.\n  return selectedParticipant || screenShareParticipant || dominantSpeaker || participants[0] || localParticipant;\n}\n","import React from 'react';\nimport ParticipantStrip from '../ParticipantStrip/ParticipantStrip';\nimport { styled } from '@material-ui/core/styles';\nimport MainParticipant from '../MainParticipant/MainParticipant';\n\nconst Container = styled('div')({\n  position: 'relative',\n  height: '100%',\n});\n\nconst MainParticipantContainer = styled('div')(({ theme }) => ({\n  position: 'absolute',\n  left: theme.sidebarWidth,\n  right: 0,\n  top: 0,\n  bottom: 0,\n  '& > div': {\n    height: '100%',\n  },\n}));\n\nexport default function Room() {\n  return (\n    <Container>\n      <ParticipantStrip />\n      <MainParticipantContainer>\n        <MainParticipant />\n      </MainParticipantContainer>\n    </Container>\n  );\n}\n","import React from 'react';\nimport { styled } from '@material-ui/core/styles';\n\nimport Controls from './components/Controls/Controls';\nimport LocalVideoPreview from './components/LocalVideoPreview/LocalVideoPreview';\nimport MenuBar from './components/MenuBar/MenuBar';\nimport ReconnectingNotification from './components/ReconnectingNotification/ReconnectingNotification';\nimport Room from './components/Room/Room';\n\nimport useRoomState from './hooks/useRoomState/useRoomState';\n\nconst Container = styled('div')({\n  display: 'flex',\n  flexDirection: 'column',\n  height: '100vh',\n});\n\nconst Main = styled('main')({\n  height: '100%',\n  position: 'relative',\n});\n\nexport default function App() {\n  const roomState = useRoomState();\n\n  return (\n    <Container>\n      <MenuBar />\n      <Main>\n        {roomState === 'disconnected' ? <LocalVideoPreview /> : <Room />}\n        <Controls />\n      </Main>\n      <ReconnectingNotification />\n    </Container>\n  );\n}\n","import React, { PropsWithChildren } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport enhanceMessage from './enhanceMessage';\nimport { TwilioError } from 'twilio-video';\n\ninterface ErrorDialogProps {\n  dismissError: Function;\n  error: TwilioError | null;\n}\n\nfunction ErrorDialog({ dismissError, error }: PropsWithChildren<ErrorDialogProps>) {\n  const { message, code } = error || {};\n  const enhancedMessage = enhanceMessage(message, code);\n\n  return (\n    <Dialog open={error !== null} onClose={() => dismissError()} fullWidth={true} maxWidth=\"xs\">\n      <DialogTitle>ERROR</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{enhancedMessage}</DialogContentText>\n        {code && (\n          <pre>\n            <code>Error Code: {code}</code>\n          </pre>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => dismissError()} color=\"primary\" autoFocus>\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default ErrorDialog;\n","// This function is used to provide error messages to the user that are\n// different than the error messages provided by the SDK.\nexport default function enhanceMessage(message = '', code?: number) {\n  switch (code) {\n    case 20101: // Invalid token error\n      return message + '. Please make sure you are using the correct credentials.';\n    default:\n      return message;\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"btn_google_light_normal_ios\");\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"filter\", {\n  x: \"-50%\",\n  y: \"-50%\",\n  width: \"200%\",\n  height: \"200%\",\n  filterUnits: \"objectBoundingBox\",\n  id: \"filter-1\"\n}, React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 1,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter1\"\n}), React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  in: \"shadowOffsetOuter1\",\n  result: \"shadowBlurOuter1\"\n}), React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\",\n  in: \"shadowBlurOuter1\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter1\"\n}), React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 0,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter2\"\n}), React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  in: \"shadowOffsetOuter2\",\n  result: \"shadowBlurOuter2\"\n}), React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\",\n  in: \"shadowBlurOuter2\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter2\"\n}), React.createElement(\"feMerge\", null, React.createElement(\"feMergeNode\", {\n  in: \"shadowMatrixOuter1\"\n}), React.createElement(\"feMergeNode\", {\n  in: \"shadowMatrixOuter2\"\n}), React.createElement(\"feMergeNode\", {\n  in: \"SourceGraphic\"\n}))), React.createElement(\"rect\", {\n  id: \"path-2\",\n  x: 0,\n  y: 0,\n  width: 40,\n  height: 40,\n  rx: 2\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Google-Button\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  id: \"9-PATCH\",\n  transform: \"translate(-608.000000, -160.000000)\"\n}), React.createElement(\"g\", {\n  id: \"btn_google_light_normal\",\n  transform: \"translate(-1.000000, -1.000000)\"\n}, React.createElement(\"g\", {\n  id: \"logo_googleg_48dp\",\n  transform: \"translate(15.000000, 15.000000)\"\n}, React.createElement(\"path\", {\n  d: \"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\",\n  id: \"Shape\",\n  fill: \"#4285F4\"\n}), React.createElement(\"path\", {\n  d: \"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\",\n  id: \"Shape\",\n  fill: \"#34A853\"\n}), React.createElement(\"path\", {\n  d: \"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\",\n  id: \"Shape\",\n  fill: \"#FBBC05\"\n}), React.createElement(\"path\", {\n  d: \"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\",\n  id: \"Shape\",\n  fill: \"#EA4335\"\n}), React.createElement(\"path\", {\n  d: \"M0,0 L18,0 L18,18 L0,18 L0,0 Z\",\n  id: \"Shape\"\n})), React.createElement(\"g\", {\n  id: \"handles_square\"\n})));\n\nvar SvgGoogleLogo = function SvgGoogleLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: \"32px\",\n    height: \"32px\",\n    viewBox: \"7 7 32 32\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGoogleLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/google-logo.1b8c51ce.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M14.4 11.3c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm-3.1 4.3c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zM30 15c0 8.3-6.7 15-15 15S0 23.3 0 15 6.7 0 15 0s15 6.7 15 15zm-4 0c0-6.1-4.9-11-11-11S4 8.9 4 15s4.9 11 11 11 11-4.9 11-11zm-7.3.6c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm0-7.4c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm51.6-2.3c.1 0 .2.1.3.2v3.2c0 .2-.2.3-.3.3H65c-.2 0-.3-.2-.3-.3V6.2c0-.2.2-.3.3-.3h5.3zm-.1 4.5H60c-.1 0-.3.1-.3.3l-1.3 5-.1.3-1.6-5.3c0-.1-.2-.3-.3-.3h-4c-.1 0-.3.1-.3.3l-1.5 5-.1.3-.1-.3-.6-2.5-.6-2.5c0-.1-.2-.3-.3-.3h-8V6.1c0-.1-.2-.3-.4-.2l-5 1.6c-.2 0-.3.1-.3.3v2.7h-1.3c-.1 0-.3.1-.3.3v3.8c0 .1.1.3.3.3h1.3v4.7c0 3.3 1.8 4.8 5.1 4.8 1.4 0 2.7-.3 3.6-.8v-4c0-.2-.2-.3-.3-.2-.5.2-1 .3-1.4.3-.9 0-1.4-.4-1.4-1.4v-3.4h2.9c.1 0 .3-.1.3-.3v-3.2L47.8 24c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l1.8-5.6.9 2.9.8 2.7c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l3.8-12.6V24c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.2-.3zm6.7-4.5h-5.1c-.1 0-.3.1-.3.3v17.7c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm6.8 0h-5.3c-.1 0-.3.1-.3.3v3.1c0 .1.1.3.3.3h5.3c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm-.1 4.5h-5.1c-.1 0-.3.1-.3.3v13.1c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.3-.3zm16.1 6.8c0 3.8-3.2 7.1-7.7 7.1-4.4 0-7.6-3.3-7.6-7.1s3.2-7.1 7.7-7.1c4.4 0 7.6 3.3 7.6 7.1zm-5.4.1c0-1.4-1-2.5-2.2-2.4-1.3 0-2.2 1.1-2.2 2.4s1 2.4 2.2 2.4c1.3 0 2.2-1.1 2.2-2.4z\"\n});\n\nvar SvgTwilioLogo = function SvgTwilioLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    fill: \"#F22F46\",\n    viewBox: \"0 0 100 30\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTwilioLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/twilio-logo.0e04ea74.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ChangeEvent, useState, FormEvent } from 'react';\nimport { useAppState } from '../../state';\n\nimport Button from '@material-ui/core/Button';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { ReactComponent as GoogleLogo } from './google-logo.svg';\nimport { ReactComponent as TwilioLogo } from './twilio-logo.svg';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport videoLogo from './video-logo.png';\n\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n  container: {\n    height: '100vh',\n    background: '#0D122B',\n  },\n  twilioLogo: {\n    width: '55%',\n    display: 'block',\n  },\n  videoLogo: {\n    width: '25%',\n    padding: '2.4em 0 2.1em',\n  },\n  paper: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'column',\n    padding: '2em',\n    marginTop: '4em',\n    background: 'white',\n    color: 'black',\n  },\n  button: {\n    color: 'black',\n    background: 'white',\n    margin: '0.8em 0 0.7em',\n    textTransform: 'none',\n  },\n  errorMessage: {\n    color: 'red',\n    display: 'flex',\n    alignItems: 'center',\n    margin: '1em 0 0.2em',\n    '& svg': {\n      marginRight: '0.4em',\n    },\n  },\n});\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'light',\n  },\n});\n\nexport default function LoginPage() {\n  const classes = useStyles();\n  const { signIn, user, isAuthReady } = useAppState();\n  const history = useHistory();\n  const location = useLocation<{ from: Location }>();\n  const [passcode, setPasscode] = useState('');\n  const [authError, setAuthError] = useState<Error | null>(null);\n\n  const isAuthEnabled = Boolean(process.env.REACT_APP_SET_AUTH);\n\n  const login = () => {\n    setAuthError(null);\n    signIn?.(passcode)\n      .then(() => {\n        history.replace(location?.state?.from || { pathname: '/' });\n      })\n      .catch(err => setAuthError(err));\n  };\n\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    login();\n  };\n\n  if (user || !isAuthEnabled) {\n    history.replace('/');\n  }\n\n  if (!isAuthReady) {\n    return null;\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.container}>\n        <Paper className={classes.paper} elevation={6}>\n          <TwilioLogo className={classes.twilioLogo} />\n          <img className={classes.videoLogo} src={videoLogo} alt=\"Video Logo\"></img>\n\n          {process.env.REACT_APP_SET_AUTH === 'firebase' && (\n            <Button variant=\"contained\" className={classes.button} onClick={login} startIcon={<GoogleLogo />}>\n              Sign in with Google\n            </Button>\n          )}\n\n          {process.env.REACT_APP_SET_AUTH === 'passcode' && (\n            <form onSubmit={handleSubmit}>\n              <Grid container alignItems=\"center\" direction=\"column\">\n                <TextField\n                  id=\"input-passcode\"\n                  label=\"Passcode\"\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => setPasscode(e.target.value)}\n                  type=\"password\"\n                />\n                <div>\n                  {authError && (\n                    <Typography variant=\"caption\" className={classes.errorMessage}>\n                      <ErrorOutlineIcon />\n                      {authError.message}\n                    </Typography>\n                  )}\n                </div>\n                <Button variant=\"contained\" className={classes.button} type=\"submit\" disabled={!passcode.length}>\n                  Submit\n                </Button>\n              </Grid>\n            </form>\n          )}\n        </Paper>\n      </Grid>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\nimport { useAppState } from '../../state';\n\nexport default function PrivateRoute({ children, ...rest }: RouteProps) {\n  const { isAuthReady, user } = useAppState();\n    \n  const renderChildren = user || !process.env.REACT_APP_SET_AUTH;\n\n  if (!renderChildren && !isAuthReady) {\n    return null;\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        renderChildren ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n","import { createMuiTheme } from '@material-ui/core';\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    sidebarWidth: number;\n  }\n\n  // allow configuration using `createMuiTheme`\n  interface ThemeOptions {\n    sidebarWidth?: number;\n  }\n}\n\nexport default createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#F22F46',\n    },\n  },\n  sidebarWidth: 260,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { CssBaseline } from '@material-ui/core';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\n\nimport App from './App';\nimport AppStateProvider, { useAppState } from './state';\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\nimport { ConnectOptions } from 'twilio-video';\nimport ErrorDialog from './components/ErrorDialog/ErrorDialog';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport PrivateRoute from './components/PrivateRoute/PrivateRoute';\nimport theme from './theme';\nimport './types';\nimport { VideoProvider } from './components/VideoProvider';\n\n// See: https://media.twiliocdn.com/sdk/js/video/releases/2.0.0/docs/global.html#ConnectOptions\n// for available connection options.\nconst connectionOptions: ConnectOptions = {\n  bandwidthProfile: {\n    video: {\n      mode: 'collaboration',\n      renderDimensions: {\n        high: { height: 1080, width: 1920 },\n        standard: { height: 90, width: 160 },\n        low: { height: 90, width: 160 },\n      },\n    },\n  },\n  dominantSpeaker: true,\n  maxAudioBitrate: 12000,\n  networkQuality: { local: 1, remote: 1 },\n  preferredVideoCodecs: [{ codec: 'VP8', simulcast: true }],\n};\n\nconst VideoApp = () => {\n  const { error, setError } = useAppState();\n\n  return (\n    <VideoProvider options={connectionOptions} onError={setError}>\n      <ErrorDialog dismissError={() => setError(null)} error={error} />\n      <App />\n    </VideoProvider>\n  );\n};\n\nReactDOM.render(\n  <MuiThemeProvider theme={theme}>\n    <CssBaseline />\n    <Router>\n      <AppStateProvider>\n        <Switch>\n          <PrivateRoute exact path=\"/\">\n            <VideoApp />\n          </PrivateRoute>\n          <PrivateRoute path=\"/room/:URLRoomName\">\n            <VideoApp />\n          </PrivateRoute>\n          <Route path=\"/login\">\n            <LoginPage />\n          </Route>\n          <Redirect to=\"/\" />\n        </Switch>\n      </AppStateProvider>\n    </Router>\n  </MuiThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}